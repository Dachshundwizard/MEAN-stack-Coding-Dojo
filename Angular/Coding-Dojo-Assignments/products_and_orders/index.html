<!DOCTYPE html>
<html lang="en" ng-app='app'>
    <head>
        <meta charset="utf-8">
        <title>Products and Orders</title>
        <link rel="stylesheet" href="main.css">
        <script src="bower_components/angular/angular.js" charset="utf-8"></script>
        <script src="main.js" charset="utf-8"></script>
    </head>
    <body>
        <div ng-controller="productController">
            <fieldset>
                <legend>Products Controller</legend>
                <form ng-submit="create()">
                    <input type="text" ng-model="product.name" placeholder="Product Name">
                    <input type="number" ng-model="product.price" step="0.01" placeholder="Enter Price">
                    <input type="submit" value="Add Product">
                </form>
                <table>
                    <thead>
                        <tr>
                            <td>Name</td>
                            <td>Price</td>
                            <td>Action</td>
                        </tr>
                    </thead>
                    <tbody ng-repeat="product in products | orderBy: 'price' track by $index ">
                        <tr>
                            <td>{{product.name}}</td>
                            <td>{{product.price | currency: "USD $"}}</td>
                            <td>
                                <button ng-click="delete($index)">Delete Product</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
        <div ng-controller="ordersController">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody ng-repeat="product in products | orderBy: 'price' track by $index ">
                    <tr>
                        <td>{{product.name}}</td>
                        <td>{{product.price | currency:"USD $"}}</td>
                        <td>{{product.quantity}}</td>
                        <td>
                            <button ng-click="update($index)">Buy Product</button>
                        </td>
                    </tr>
                </tbody>
            </table>
    </body>
</html>
