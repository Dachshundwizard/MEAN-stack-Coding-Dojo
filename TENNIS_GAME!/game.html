<!DOCTYPE html>
<html>
<!-- There's going to be a a block for the game -->
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
    var canvas; // This will be a handle on the information of the dimensions of our display area
    var canvasContext; // Underlying graphical information
    var ballX = 50;
    var ballY = 50;
    var ballSpeedX = 10; // Going this fast per update
    var ballSpeedY = 4; // Postive y goes downward, not up.

    var paddle1Y = 250;
    const PADDLE_HEIGHT = 100; // This value will not change.

// The program is going to fire this function everytime the mouse moves.
function calculateMousePos(evt){ //evt = event data
    var rect = canvas.getBoundingClientRect(); // This is the black rect
    var root = document.documentElement;
    // We are getting the x and y coords of the mouse within the play box.
    var mouseX = evt.clientX - rect.left - root.scrollLeft;
    var mouseY = evt.clientY - rect.top - root.scrollTop;
    return { // Keeping x and y together.
            x: mouseX,
            y: mouseY
    };
}

    window.onload = function() { // Once the page loads, run. Run!!!
        canvas = document.getElementById('gameCanvas');
        canvasContext = canvas.getContext('2d');

        var framesPerSecond = 30
        setInterval(function() { // Really small straight-forward function that will only be called once.
            moveEverything();
            drawEverything();
        }, 1000 / framesPerSecond);

        canvas.addEventListener('mousemove',
                function(evt) { // Defining inline function
                    var mousePos = calculateMousePos(evt);
                    paddle1Y = mousePos.y - (PADDLE_HEIGHT/2);
                });
    }

    function ballReset() {
        ballSpeedX = -ballSpeedX
        ballX = canvas.width/2; // Will give us center horizontally
        ballY = canvas.height/2; // Will give us vertical center
    }

    function moveEverything() {
        ballX = ballX + ballSpeedX; // this gets called 3 times per second.
        ballY = ballY + ballSpeedY;

        if (ballX >= canvas.width) { // this works because we have canvas var defined.
            ballSpeedX = -ballSpeedX;
        }
        if (ballX <= 0) { //
            if(ballY > paddle1Y && ballY < paddle1Y+PADDLE_HEIGHT) {
                ballSpeedX = -ballSpeedX;
            } else {
            //ballSpeedX = -ballSpeedX
            ballReset();
        }
        }
        if (ballY >= canvas.height) { // this works because we have canvas var defined.
            ballSpeedY = -ballSpeedY;
        }
        if (ballY <= 0) {
            ballSpeedY = -ballSpeedY;
        }
    }

    function drawEverything() {
        // Next line blanks out the screen with black
        colorRect(0, 0, canvas.width, canvas.height, 'black'); // 0 pixels from the left, 0 pixels from the top. These values state how far away from the top-left corner it starts
        // This is left player paddle
        colorRect(3, paddle1Y, 10, PADDLE_HEIGHT, 'white'); // How many px away from left side, how many px away from top.
        // Next line draws the ball
        colorCircle(ballX, ballY, 7, 'red');
    }

    function colorCircle(centerX, centerY, radius, drawColor) {
        canvasContext.fillStyle = drawColor;
        canvasContext.beginPath();
        canvasContext.arc(centerX, centerY, radius, 0, Math.PI*2, true);
        canvasContext.fill();
    }

    function colorRect(leftX, topY, width, height, drawColor) {
        canvasContext.fillStyle = drawColor;
        canvasContext.fillRect(leftX, topY, width, height);
    }
</script>

</html>
